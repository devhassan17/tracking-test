<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Website</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        header {
            background: #007BFF;
            color: white;
            padding: 10px 20px;
            text-align: center;
        }

        main {
            padding: 20px;
            text-align: center;
        }

        footer {
            background: #f4f4f4;
            color: #333;
            text-align: center;
            padding: 10px;
            margin-top: 20px;
        }
    </style>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Fetch IP info from ipinfo.io
        fetch('https://ipinfo.io/json?token=4b143e6e51301d')
            .then(response => response.json())
            .then(data => {
                console.log('IP Info:', data);
    
                const ip = data.ip;
                const country = data.country;
    
                // Tracking variables
                const universityId = '6';
                const trackClickUrl = 'http://127.0.0.1:8000/track-click/';
    
                // Utility function to log messages to the console
                const logToConsole = (message) => console.log(message);
    
                // Function to send tracking data
                const sendTrackingData = (type) => {
                    const trackingData = { type, universityId, ip, country };
                    logToConsole(`Sending tracking data: ${JSON.stringify(trackingData)}`);
    
                    fetch(trackClickUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(trackingData),
                    })
                        .then(response => response.json())
                        .then(result => logToConsole(`Response: ${JSON.stringify(result)}`))
                        .catch(error => logToConsole(`Error sending tracking data: ${error}`));
                };
    
                // Create the "Chat to our Students" button
                const chatButton = document.createElement('div');
                chatButton.innerHTML = `
                    <span style="transform: rotate(-90deg); display: inline-block;">Chat to our Students</span>
                `;
                chatButton.style.cssText = `
                    position: fixed;
                    top: 50%;
                    right: 18px;
                    transform: translateY(-50%);
                    width: 50px;
                    height: 50px;
                    background: #007BFF;
                    color: white;
                    font-size: 12px;
                    font-weight: bold;
                    text-align: center;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 25px;
                    cursor: pointer;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
                    z-index: 1000;
                    transition: all 0.3s ease;
                `;
                let isOpen = false;
    
                // Create the sliding panel
                const panel = document.createElement('div');
                panel.style.cssText = `
                    position: fixed;
                    top: 50%;
                    right: -320px;
                    transform: translateY(-50%);
                    width: 300px;
                    height: auto;
                    background: white;
                    border: 1px solid #ccc;
                    border-radius: 10px;
                    padding: 20px;
                    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
                    transition: all 0.3s ease;
                    z-index: 1001;
                    display: block;
                `;
                panel.innerHTML = `
                    <p>Would you like to book an appointment with one of our current students or alumni?</p>
                    <button id="yesButton" style="margin-right: 10px; padding: 5px 15px; background: #007BFF; color: white; border: none; border-radius: 3px; cursor: pointer;">Yes</button>
                    <button id="noButton" style="padding: 5px 15px; background: #FF0000; color: white; border: none; border-radius: 3px; cursor: pointer;">No</button>
                    <div style="text-align: center; margin-top: 15px;">
                        <a href="https://example.com" target="_blank" style="text-decoration: none; color: #007BFF; font-size: 12px;">Powered by Example</a>
                    </div>
                `;
    
                // Append panel to body
                document.body.appendChild(panel);
    
                // Function to toggle the panel
                const togglePanel = () => {
                    if (isOpen) {
                        panel.style.right = '-320px';
                        chatButton.innerHTML = `<span style="transform: rotate(-90deg); display: inline-block;">Chat to our Students</span>`;
                    } else {
                        panel.style.right = '20px';
                        chatButton.innerHTML = `<span style="transform: rotate(-90deg); display: inline-block;">&lt;</span>`;
                    }
                    isOpen = !isOpen;
                };
    
                // Button click to toggle the panel
                chatButton.onclick = () => {
                    togglePanel();
                    if (isOpen) sendTrackingData('chat');
                };
    
                // Yes button click functionality
                panel.querySelector('#yesButton').onclick = () => {
                    window.open('https://calendly.com/example', '_blank');
                    sendTrackingData('calendly');
                };
    
                // No button click functionality
                panel.querySelector('#noButton').onclick = () => {
                    togglePanel();
                    setTimeout(() => {
                        panel.style.right = '-320px';
                    }, 300);
                    sendTrackingData('no');
                };
    
                // Append button to body
                document.body.appendChild(chatButton);
            })
            .catch(error => console.error('Error fetching IP info:', error));
    });
    </script>
    
    
</head>
<body>
    <header>
        <h1>Welcome to Our Simple Website</h1>
    </header>
    <main>
        <p>This is a simple website with a single home page. It includes an interactive button for connecting with us.</p>
        <p>Explore and enjoy!</p>
    </main>
    <footer>
        <p>&copy; 2024 Simple Website. All rights reserved.</p>
    </footer>
</body>
</html>
